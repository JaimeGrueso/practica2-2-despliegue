{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"Practica2-2/","title":"Pr\u00e1ctica 2.2 \u2013 Autenticaci\u00f3n en Nginx","text":""},{"location":"Practica2-2/#jaime-grueso-martin","title":"Jaime Grueso Martin","text":""},{"location":"Practica2-2/#indice","title":"Indice","text":"<ol> <li>Requisitos Indispensables Previos Al Comienzo de la Pr\u00e1ctica</li> <li>Introducci\u00f3n</li> <li>Paquetes Necesarios</li> <li>Creaci\u00f3n de Usuarios y Contrase\u00f1as para el Acceso Web</li> <li>Configurando el Servidor Nginx para Usar Autenticaci\u00f3n B\u00e1sica</li> <li>Probando la Nueva Configuraci\u00f3n<ol> <li>Tareas</li> <li>Combinaci\u00f3n de la Autenticaci\u00f3n B\u00e1sica con la Restricci\u00f3n de Acceso por IP</li> </ol> </li> <li>Tareas</li> <li>Cuestiones Finales<ol> <li>Cuestion 1</li> <li>Cuestion 2</li> <li>Cuestion 3</li> <li>Cuestion 4</li> </ol> </li> </ol>"},{"location":"Practica2-2/#requisitos-indispensables-previos-al-comienzo-de-la-practica","title":"Requisitos Indispensables Previos Al Comienzo de la Pr\u00e1ctica","text":"<p>Es importante que la pr\u00e1ctica anterior est\u00e9 funcionando correctamente y se hayan hecho las comprobaciones necesarias.</p>"},{"location":"Practica2-2/#introduccion","title":"Introducci\u00f3n","text":"<p>En una transacci\u00f3n HTTP, la autenticaci\u00f3n b\u00e1sica es un m\u00e9todo que permite a un navegador web u otro cliente enviar credenciales, como nombre de usuario y contrase\u00f1a, cuando solicita una p\u00e1gina al servidor. Esta forma de autenticaci\u00f3n es la m\u00e1s simple para aplicaciones web. No destaca por su seguridad o sofisticaci\u00f3n. No requiere el uso de cookies, identificadores de sesi\u00f3n ni p\u00e1ginas de inicio de sesi\u00f3n.</p>"},{"location":"Practica2-2/#paquetes-necesarios","title":"Paquetes Necesarios","text":"<p>Se utilizar\u00e1 la herramienta Openssl para crear las contrase\u00f1as. Se instalar\u00e1 en caso de no tenerlo instalado. </p>"},{"location":"Practica2-2/#creacion-de-usuarios-y-contrasenas-para-el-acceso-web","title":"Creaci\u00f3n de Usuarios y Contrase\u00f1as para el Acceso Web","text":"<p>Se crear\u00e1 un usuario con el nombre del usuario y otro con el apellido del mismo. Para ello se crear\u00e1 un archivo oculto llamado <code>.htpasswd</code>. Aqu\u00ed se guardar\u00e1n los usuarios y contrase\u00f1as.</p> <p></p> <p></p> <p>Las contrase\u00f1as deber\u00e1n aparecer cifrads cuando se abra el archivo.</p> <p></p>"},{"location":"Practica2-2/#configurando-el-servidor-nginx-para-usar-autenticacion-basica","title":"Configurando el Servidor Nginx para Usar Autenticaci\u00f3n B\u00e1sica","text":"<p>Se cambiar\u00e1 la configuraci\u00f3n del server block sobre el cual queremos aplicar la restricci\u00f3n de acceso.</p> <p><code>sudo nano /etc/nginx/sites-available/nombre_web</code></p> <p></p> <p>Nginx permite a\u00f1adir restricciones a nivel de servidor o en un location. Se proteger\u00e1 el documento raiz de la web.</p> <p>Se utilizar\u00e1 <code>auth_basic</code> dentro del location y se pondr\u00e1 un nombre a lo que se mostrar\u00e1. Se configurar\u00e1 Nginx para que utilice el fichero previamente creado con <code>auth_basic_user_file</code>.</p> <p></p> <p>Se reiniciar\u00e1n los servicios de Nginx para que se apliquen los cambios hechos hasta ahora.</p> <p></p>"},{"location":"Practica2-2/#probando-la-nueva-configuracion","title":"Probando la Nueva Configuraci\u00f3n","text":"<p>Si se han seguido los pasos, se podr\u00e1 visualizar una ventana requiriendo el usuario y la contrase\u00f1a que se ha configurado previamente.</p> <p></p> <p>Si se decide cancelar la autenticaci\u00f3n se mostrar\u00e1 una ventana con el siguiente error:</p> <p></p> <p>Una vez autenticados, la informacion se guardar\u00e1 en el navegador y no se volver\u00e1 a requerir de los datos de autenticaci\u00f3n.</p>"},{"location":"Practica2-2/#tareas","title":"Tareas","text":"<p>Se realizar\u00e1 una prueba que consiste en intentar entrar en la p\u00e1gina web con un usuario err\u00f3neo y despu\u00e9s con uno de verdad. Esto quedar\u00e1 registrado en los logs. Se va a intentar entrar con el usuario \"manolo\"</p> <p>Aqui se puede ver que se ha intentado acceder con el usuario \"manolo\" y ha quedado registrado en el archivo <code>access.log</code> y <code>error.log</code>. Cuando se ha intentado entrar con un usuario registrado, no se aprecia ning\u00fan error.</p> <p></p> <p></p> <p>La siguiente tarea consiste en solo aplicar la restricci\u00f3n a una sola parte de la web. Se aplicar\u00e1 a la secci\u00f3n \"Contact\". Para ello se deber\u00e1 modificar el archivo <code>/etc/nginx/sites-available/nombre_web</code>.</p> <p>Debido a que la web no tiene ficheros divididos para cada secci\u00f3n es imposible proteger una \u00fanica secci\u00f3n porque Nginx no puede aplicar la autenticaci\u00f3n directamente a los fragmentos de URL que est\u00e1n despu\u00e9s del s\u00edmbolo #, como #contact. Estos fragmentos son procesados \u00fanicamente por el navegador y no son enviados al servidor. Por ello se ha decidido hacer un archivo HTML, pero solo con la parte <code>Contact</code>. </p> <p>Para aplicar la proteci\u00f3n se ha de modificar el archivo de configuraci\u00f3n.</p> <p></p> <p>Y una vez hecho esto, la p\u00e1gina web a la que se accede sigue siendo la misma, solo que ninguno de los botones a excepci\u00f3n de \"Contacto\" funcionan. Al entrar ahora en la web <code>https://www.jaimegmweb.com/contact.html</code> se solicitar\u00e1n las credeciales necesarias.</p> <p></p>"},{"location":"Practica2-2/#combinacion-de-la-autenticacion-basica-con-la-restriccion-de-acceso-por-ip","title":"Combinaci\u00f3n de la Autenticaci\u00f3n B\u00e1sica con la Restricci\u00f3n de Acceso por IP","text":"<p>La autenticaci\u00f3n b\u00e1sica HTTP ser\u00e1 combinada con la restricci\u00f3n de acceso por IP:</p> <p>Un usuario es autenticado y tendr\u00e1 una IP. Un usuario es autenticado o tendr\u00e1 una IP.</p>"},{"location":"Practica2-2/#tareas_1","title":"Tareas","text":"<p>Se configurar\u00e1 Nginx para que la IP de la maquina f\u00edsica no tenga acceso a la raiz de la web. Para ello se modificar\u00e1 el archivo de configuracion.</p> <p></p> <p>Al intentar acceder, el navegador nos mostrar\u00e1 la siguinte pantalla:</p> <p></p> <p>Y si se mira el archivo error.log, aparecer\u00e1 el un error que indica que se ha prohibido el acceso.</p> <p></p> <p>Ahora se har\u00e1 lo contrario, se tendr\u00e1 un ususario v\u00e1lido y una IP v\u00e1lida. Se modificar\u00e1 el archivo de configuraci\u00f3n como previamente se ha hecho.</p> <p></p> <p>Al intentar entrar en la web, no se pone ning\u00fan tipo de impedimento.</p> <p></p>"},{"location":"Practica2-2/#cuestiones-finales","title":"Cuestiones Finales","text":""},{"location":"Practica2-2/#cuestion-1","title":"Cuesti\u00f3n 1","text":"<p>No se podr\u00e1 acceder porque, aunque la IP est\u00e1 permitida, la directiva <code>satisfy all</code>; requiere cumplir tanto la validaci\u00f3n de IP como la autenticaci\u00f3n b\u00e1sica. Si se ingresa erroneamente el usuario o la contrase\u00f1a, fallas en la autenticaci\u00f3n, por lo que el acceso ser\u00e1 denegado.</p>"},{"location":"Practica2-2/#cuestion-2","title":"Cuesti\u00f3n 2","text":"<p>No se podr\u00e1 acceder porque la regla <code>deny all</code>; bloquea todas las IPs antes de llegar a la excepci\u00f3n que permite la IP. Aunque se introduzca el usuario y la contrase\u00f1a correctamente, la directiva <code>deny all</code>; se eval\u00faa primero, bloqueando el acceso antes de verificar si la IP est\u00e1 permitida.</p>"},{"location":"Practica2-2/#cuestion-3","title":"Cuesti\u00f3n 3","text":"<p>No se podr\u00e1 acceder porque, aunque la directiva <code>satisfy any</code> permite el acceso si se cumple cualquiera de las condiciones la IP est\u00e1 bloqueada con la regla <code>deny</code>. Aunque se ingresee correctamente el usuario y la contrase\u00f1a, la denegaci\u00f3n de tu IP impide el acceso.</p>"},{"location":"Practica2-2/#cuestion-4","title":"Cuesti\u00f3n 4","text":"<pre><code>location /Proyectos {\n    try_files $uri $uri/ =404;  # Devuelve un error 404\n\n    auth_basic \"Acceso Restringido\";  # Mensaje de autenticaci\u00f3n\n    auth_basic_user_file /etc/nginx/.htpasswd;\n}\n</code></pre>"}]}